{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector(\"input\");\nconst startBtn = document.querySelector(\"button\");\nstartBtn.disabled = true;\nstartBtn.addEventListener(\"click\", handleClick);\nconst inputDays = document.querySelector(\"[data-days]\");\nconst inputHours = document.querySelector(\"[data-hours]\");\nconst inputMinutes = document.querySelector(\"[data-minutes]\");\nconst inputSeconds = document.querySelector(\"[data-seconds]\");\n\nlet userSelectedDate;\n\nconst timeDifference = time => {\n    const currentUnixTime = Date.now();\n    const difference = userSelectedDate - currentUnixTime;\n    return difference;\n};\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\");\n};\n\nfunction handleClick() {\n\n    const intervalId = setInterval(() => {\n        const difference = timeDifference(userSelectedDate);\n        const resultConvert = convertMs(difference);\n        const { days, hours, minutes, seconds } = resultConvert;\n        \n        inputDays.textContent = addLeadingZero(days);\n        inputHours.textContent = addLeadingZero(hours);\n        inputMinutes.textContent = addLeadingZero(minutes);\n        inputSeconds.textContent = addLeadingZero(seconds);\n    }, 1000);\n\n    const difference = timeDifference(userSelectedDate);\n    setTimeout(() => {\n        clearInterval(intervalId);\n        input.disabled = false;\n        startBtn.disabled = false;\n    }, difference);\n\n    input.disabled = true;\n    startBtn.disabled = true;\n};\n\nflatpickr(\"#datetime-picker\", {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates,) {\n        const unixTime = selectedDates[0].getTime();\n        userSelectedDate = unixTime;\n        const difference = timeDifference(unixTime);\n\n        const validDate = date => {\n            return new Promise((resolve, reject) => {\n                if (date < 0) {\n                    reject(iziToast.error({\n                        message: 'Please choose a date in the future',\n                        messageColor: '#fff',\n                        messageSize: '16px',\n                        messageLineHeight: '1,5',\n                        backgroundColor: '#EF4040',\n                        position: 'topRight',\n                        progressBarColor: '#B51B1B',\n                        theme: 'dark',\n                        iconUrl: './img/error.svg',\n                    }));\n                } else {\n                    resolve();\n                }\n            });\n        };\n        \n        validDate(difference)\n            .then(() => {\n                startBtn.disabled = false;\n            })\n            .catch(error => {\n                error;\n                startBtn.disabled = true;\n            });\n    },\n});\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n};\n"],"names":["input","startBtn","handleClick","inputDays","inputHours","inputMinutes","inputSeconds","userSelectedDate","timeDifference","time","currentUnixTime","addLeadingZero","value","intervalId","difference","resultConvert","convertMs","days","hours","minutes","seconds","flatpickr","selectedDates","date","resolve","reject","iziToast","error","ms"],"mappings":"2GAMA,MAAMA,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAW,SAAS,cAAc,QAAQ,EAChDA,EAAS,SAAW,GACpBA,EAAS,iBAAiB,QAASC,CAAW,EAC9C,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EAEJ,MAAMC,EAAiBC,GAAQ,CAC3B,MAAMC,EAAkB,KAAK,MAE7B,OADmBH,EAAmBG,CAE1C,EAEA,SAASC,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASV,GAAc,CAEnB,MAAMW,EAAa,YAAY,IAAM,CACjC,MAAMC,EAAaN,EAA+B,EAC5CO,EAAgBC,EAAUF,CAAU,EACpC,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKL,EAE1CZ,EAAU,YAAcQ,EAAeM,CAAI,EAC3Cb,EAAW,YAAcO,EAAeO,CAAK,EAC7Cb,EAAa,YAAcM,EAAeQ,CAAO,EACjDb,EAAa,YAAcK,EAAeS,CAAO,CACpD,EAAE,GAAI,EAEDN,EAAaN,EAA+B,EAClD,WAAW,IAAM,CACb,cAAcK,CAAU,EACxBb,EAAM,SAAW,GACjBC,EAAS,SAAW,EACvB,EAAEa,CAAU,EAEbd,EAAM,SAAW,GACjBC,EAAS,SAAW,EACxB,CAEAoB,EAAU,mBAAoB,CAC1B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAgB,CAEpBf,EADiBe,EAAc,CAAC,EAAE,QAAO,EAEzC,MAAMR,EAAaN,EAAuB,GAExBe,GACP,IAAI,QAAQ,CAACC,EAASC,IAAW,CAChCF,EAAO,EACPE,EAAOC,EAAS,MAAM,CAClB,QAAS,qCACT,aAAc,OACd,YAAa,OACb,kBAAmB,MACnB,gBAAiB,UACjB,SAAU,WACV,iBAAkB,UAClB,MAAO,OACP,QAAS,iBACZ,CAAA,CAAC,EAEFF,GAEpB,CAAa,GAGKV,CAAU,EACf,KAAK,IAAM,CACRb,EAAS,SAAW,EACpC,CAAa,EACA,MAAM0B,GAAS,CAEZ1B,EAAS,SAAW,EACpC,CAAa,CACR,CACL,CAAC,EAED,SAASe,EAAUY,EAAI,CAMrB,MAAMX,EAAO,KAAK,MAAMW,EAAK,KAAG,EAC1BV,EAAQ,KAAK,MAAOU,EAAK,MAAO,IAAI,EACpCT,EAAU,KAAK,MAAQS,EAAK,MAAO,KAAQ,GAAM,EACjDR,EAAU,KAAK,MAASQ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAX,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}